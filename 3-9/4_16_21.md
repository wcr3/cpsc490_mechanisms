# 3-9 Apr 16, 2021
This week, I encountered a seemingly-small-but-actually-somewhat-large problem in my constraint solver.  The problem resides in `scipy`'s implementation of function minimization.  In order to perform gradient descent in the solution space, the inputs (the locations and orientations of the members) are perturbed one at a time and the effect on the cost function is recorded.  From there, the changes which resulted in a decrease are performed iteratively.  This perturbation causes issues because the solver represents object orientations as quaternions.  Rotation quaternions must always have unit magnitude, but this property is lost during the execution of gradient descent, which causes an insidiously occasional crash when recovering orientation angles from the quaternion.  It's worth noting that the quaternion representation is necessary in order to avoid gimbal lock, which, while not very critical for manually positioned systems, is problematic for computational positoning.  While a single angle might appear sufficient for representation in 2D, this fails for mechanisms that include screw-based actuators.

I *think* a solution to this problem is to use a (confusingly-named) constrained minimization algorithm.  `scipy` [provides a couple impementations](https://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html#constrained-minimization-of-multivariate-scalar-functions-minimize) (Trust-Region Constrained, Sequential Least Squares, Linear Approimation), but I am unsure how best to use them at the moment.  The constraint is of the form that, for each quaternion in the input space, its squared norm needs to equal one, but this is highly nonlinear, and may generate significant performance hit.  I'll keep working on it, but honestly I think the best bet is to look at other implementations.  (I'm working through [this paper](https://www.cs.purdue.edu/homes/cmh/distribution/papers/Constraints/CAD95.pdf) right now).

Nonetheless, I've managed to implement the curve parameterization, although, because the numbers are pretty much meanignless by themselves, I don't really have much to show for it.
